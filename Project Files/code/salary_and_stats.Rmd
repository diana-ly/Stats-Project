---
title: "Final Project 2"
author: "Stacy J Chang"
date: "December 6, 2015"
output: word_document
---
# Final Project 
## NBA Performance Correlation Analysis 
## "Does performance and salary correlate? Do high performing players earn the most money?"

### IMPORTING & CLEANING DATA

``` {r}
library(dplyr)
```
Data Cleaning

The leading NBA teams in all 6 divisions: Atlantic Division, Central Division, Southeat Division, Northwest Division, Pacific Division, Southwest Division. The teams are Toranto Raptors, Cleveland Cavaliers, Atlanta Hawks, Portland Trail Blazers, Golden State Warriors, and Houston Rockets respectively. We retrieved the csv files of the rosters and each players' stats for the 2014-2015 season from basketball=reference.com and espn. This part of the project is to combine the different team files into one data file. 

First, the rosters:
```{r}
# Import all the team files
roster <- read.csv('data/roster.csv', stringsAsFactors = F)
```

Second: Players' 2014-2015 season stats:
```{r}
player_stats <- read.csv('data/player_stats.csv', stringsAsFactors = F)
```

### COMPILING DATA

#### Setting Directory
```{r}
salary <- read.csv('data/salaries_1415.csv', stringsAsFactors = F)
```

#### Data frame of Basketball Data and Salary 
```{r}
stats_salary <- left_join(player_stats, salary, by = 'Player')
stats_salary <- subset(stats_salary, select = -c(Team.y, X.y, X.x, Position))

for (i in 1:length(row.names(stats_salary))) {
  if (is.na(stats_salary[i,]$Salary)) {
    stats_salary <- stats_salary[-c(i), ]
  }
}

write.csv(stats_salary, "data/stats_and_salary.csv")
```

#### Joining Player Stats, Position, and Salary (FINAL)  
```{r}
position <- subset(roster, select = c(Player, Pos))
stats_salary_pos <- unique(left_join(stats_salary, position, by = 'Player'))

for (i in 1:length(row.names(stats_salary_pos))) {
  if (is.na(stats_salary_pos[i,]$Salary)) {
    stats_salary_pos <- stats_salary_pos[-c(i), ]
  }
}

write.csv(stats_salary_pos, "data/final_roster.csv")
```